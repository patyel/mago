# App do Mago ğŸ©âœ¨ - A IA que Trabalha pra VocÃª

## ğŸ“± Sobre o App

**App do Mago** Ã© um aplicativo mobile que usa InteligÃªncia Artificial para analisar mesas de roleta e identificar padrÃµes de sequÃªncia automaticamente. NÃ£o sabe analisar padrÃµes? Relaxa! O Mago analisa tudo pra vocÃª. Envie uma foto e deixe a magia da IA trabalhar.

## ğŸ’° Sistema de MonetizaÃ§Ã£o

Este app agora possui um **sistema completo de backend com cÃ³digos de acesso** para vocÃª monetizar vendendo assinaturas mensais (ex: R$30/mÃªs).

**BenefÃ­cios:**
- âœ… Suas chaves da OpenAI ficam protegidas no backend
- âœ… VocÃª controla quem tem acesso atravÃ©s de cÃ³digos Ãºnicos
- âœ… Hospedagem gratuita no Railway (atÃ© 50k requisiÃ§Ãµes/mÃªs)
- âœ… Gerenciamento simples atravÃ©s de arquivo JSON
- âœ… Rastreamento de uso por usuÃ¡rio

ğŸ“š **Veja o guia completo**: [README_BACKEND.md](./README_BACKEND.md)

## âœ¨ Funcionalidades

### ğŸ¯ AnÃ¡lise Inteligente com IA
- **Tire foto agora** ou **envie da galeria**
- IA de visÃ£o (GPT-4o) detecta automaticamente os nÃºmeros
- AnÃ¡lise matemÃ¡tica de padrÃµes em tempo real
- **Simples, rÃ¡pido e preciso!**

### ğŸ® Sistema de GamificaÃ§Ã£o
- **NÃ­veis e XP**: Ganhe experiÃªncia a cada anÃ¡lise e resultado registrado
- **7 Conquistas**: Desbloqueie achievements por marcos importantes
- **Badges**: Aprendiz do Mago, Mago Experiente, Mestre dos PadrÃµes, Mago Supremo e mais
- **SequÃªncia de Uso**: Mantenha uma streak de dias consecutivos

### ğŸ“Š EstatÃ­sticas AvanÃ§adas
- **Taxa de Acerto (Win Rate)**: Porcentagem de acerto das suas entradas
- **Melhor HorÃ¡rio**: Descubra em qual live vocÃª mais lucra
- **Performance Semanal**: Acompanhe dias lucrativos e lucro total
- **HistÃ³rico Completo**: Todas as anÃ¡lises com fotos salvas
- **AnÃ¡lise de PadrÃµes**: Entenda quais estratÃ©gias funcionam melhor

### ğŸ”” Sistema de Alertas e NotificaÃ§Ãµes
- **Lembretes de Live**: NotificaÃ§Ã£o nos horÃ¡rios das lives (11h, 15h, 19h)
- **Alerta de Banca**: Aviso quando banca cair X% (configurÃ¡vel)
- **Stop Loss**: Limite de perda diÃ¡ria com bloqueio automÃ¡tico
- **Meta DiÃ¡ria**: NotificaÃ§Ã£o quando atingir sua meta

### ğŸ“Š DetecÃ§Ã£o de PadrÃµes
O app identifica sequÃªncias em:
- **DÃºzias**: 1Âª (1-12), 2Âª (13-24), 3Âª (25-36)
- **Colunas**: 1Âª, 2Âª e 3Âª coluna

**Nota:** O app analisa TODOS os padrÃµes encontrados na foto (1Âª+2Âª, 1Âª+3Âª, 2Âª+3Âª) e mostra quantas sequÃªncias cada um teve, incluindo padrÃµes inativos.

### ğŸ’° Gerenciamento de Banca
- **Configure sua banca inicial**: Defina o valor da sua banca
- **Registro diÃ¡rio**: Adicione lucros ou perdas do dia
- **4 opÃ§Ãµes de registro**: Lives (11h, 15h, 19h) ou Sozinho (fora das lives)
- **GrÃ¡fico de evoluÃ§Ã£o**: Visualize os Ãºltimos 7 dias
- **HistÃ³rico completo**: Acompanhe os Ãºltimos 30 dias
- **EstatÃ­sticas em tempo real**: Veja lucro total e variaÃ§Ã£o percentual

### ğŸ§® Calculadora de Lucro
- **Meta diÃ¡ria**: Defina quanto quer lucrar por dia
- **GestÃ£o de apostas**: Calcula valores para progressÃ£o Martingale
- **Planejamento financeiro**: Veja quantas operaÃ§Ãµes pode fazer com sua banca
- **Dicas de gestÃ£o**: RecomendaÃ§Ãµes de gerenciamento de risco

### ğŸ® Sistema de ClassificaÃ§Ã£o

**ğŸ”´ Momento Fraco** (< 4 sequÃªncias)
- Aguarde! O Mago te avisarÃ¡ quando o padrÃ£o melhorar
- RecomendaÃ§Ã£o: NÃ£o entre ainda

**ğŸŸ¡ Bom Momento** (4-5 sequÃªncias)
- PadrÃ£o confiÃ¡vel! Hora de entrar com seguranÃ§a
- Momento favorÃ¡vel para entrar

**ğŸŸ¢ Alavancar!** (6-20 sequÃªncias)
- MOMENTO PERFEITO! SequÃªncia forte para alavancagem
- Alta probabilidade de continuidade

### ğŸ“ˆ EstatÃ­sticas e HistÃ³rico
- Acompanhe todas suas anÃ¡lises
- Veja quantas oportunidades boas e de alavancagem vocÃª encontrou
- Taxa de sucesso em tempo real

## ğŸ¯ EstratÃ©gia

O App do Mago opera **a favor da sequÃªncia**:

- Quando detectamos 4+ repetiÃ§Ãµes consecutivas em **dÃºzias** ou **colunas**, vocÃª recebe uma entrada
- A estratÃ©gia se baseia em apostar na continuidade do padrÃ£o observado nos **Ãºltimos 4 resultados**
- SequÃªncias de 6 a 20 sÃ£o consideradas excelentes oportunidades de alavancagem
- Se o padrÃ£o quebrar (GAIL), o app avisa para aguardar

### Exemplos:
- Se os Ãºltimos 4 caÃ­ram na 1Âª e 2Âª dÃºzia â†’ Entre na 1Âª e 2Âª dÃºzia
- Se os Ãºltimos 4 caÃ­ram na 1Âª e 3Âª coluna â†’ Entre na 1Âª e 3Âª coluna
- Se o padrÃ£o quebrou â†’ Aguarde novo padrÃ£o se formar

## ğŸ¨ Design e UX

### Design Gamificado
- Interface dark mode com gradientes visuais impressionantes
- **Tema Roxo/Purple**: Magia, IA e elementos premium
- Cards com bordas arredondadas e sombras
- Ãcones grandes e informativos
- AnimaÃ§Ãµes sutis nos botÃµes

### Copy Persuasivo
- **Onboarding**: "NÃ£o sabe analisar padrÃµes? Relaxa! ğŸ˜Œ O Mago analisa tudo pra vocÃª."
- **Home**: "âœ¨ A Magia da IA nas Suas MÃ£os"
- **Results**: Cards coloridos por confianÃ§a (roxo=alavancar, amarelo=bom, vermelho=fraco)
- **AtivaÃ§Ã£o**: BotÃ£o verde "Comprar Acesso" para facilitar conversÃ£o
- Linguagem acessÃ­vel e motivadora

### Tipografia e EspaÃ§amento
- Fontes: System font com pesos black (900), bold (700), semibold (600)
- EspaÃ§amento generoso seguindo Apple HIG
- Hierarquia visual clara com tamanhos de texto 4xl, 3xl, 2xl, xl
- Emojis estratÃ©gicos para engajamento

## ğŸ—ï¸ Arquitetura TÃ©cnica

### Stack
- **Framework**: Expo SDK 53
- **React Native**: 0.76.7
- **NavegaÃ§Ã£o**: React Navigation 7 (Native Stack)
- **Estado**: Zustand + AsyncStorage
- **Estilo**: NativeWind (TailwindCSS)
- **IA**: OpenAI GPT-4o (Vision + Text)
- **CÃ¢mera**: Expo Camera

### Estrutura de Pastas

```
src/
â”œâ”€â”€ screens/           # Telas do app
â”‚   â”œâ”€â”€ OnboardingScreen.tsx    # IntroduÃ§Ã£o e tutorial
â”‚   â”œâ”€â”€ ActivationScreen.tsx    # AtivaÃ§Ã£o de cÃ³digo de acesso
â”‚   â”œâ”€â”€ HomeScreen.tsx          # Tela principal (AnÃ¡lise)
â”‚   â”œâ”€â”€ BankrollScreen.tsx      # Gerenciamento de banca
â”‚   â”œâ”€â”€ CalculatorScreen.tsx    # Calculadora de lucro
â”‚   â”œâ”€â”€ ImagePickerScreen.tsx   # Upload de foto
â”‚   â”œâ”€â”€ AnalysisScreen.tsx      # Processamento com IA
â”‚   â”œâ”€â”€ ResultsScreen.tsx       # Resultados da anÃ¡lise
â”‚   â””â”€â”€ HistoryScreen.tsx       # HistÃ³rico e stats
â”‚
â”œâ”€â”€ navigation/        # ConfiguraÃ§Ã£o de rotas
â”‚   â”œâ”€â”€ RootNavigator.tsx       # Stack principal
â”‚   â””â”€â”€ MainTabs.tsx            # NavegaÃ§Ã£o em abas
â”‚
â”œâ”€â”€ state/            # Gerenciamento de estado
â”‚   â”œâ”€â”€ rouletteStore.ts        # Store de anÃ¡lises
â”‚   â”œâ”€â”€ accessCodeStore.ts      # Store de autenticaÃ§Ã£o
â”‚   â””â”€â”€ bankrollStore.ts        # Store de banca
â”‚
â”œâ”€â”€ utils/            # UtilitÃ¡rios
â”‚   â”œâ”€â”€ rouletteAnalyzer.ts   # Motor de anÃ¡lise de padrÃµes
â”‚   â””â”€â”€ cn.ts                  # Helper TailwindCSS
â”‚
â”œâ”€â”€ types/            # TypeScript types
â”‚   â”œâ”€â”€ roulette.ts   # Tipos do domÃ­nio
â”‚   â””â”€â”€ ai.ts         # Tipos de IA
â”‚
â”œâ”€â”€ services/         # ServiÃ§os externos
â”‚   â””â”€â”€ backend.ts    # Cliente do backend
â”‚
â””â”€â”€ api/              # IntegraÃ§Ãµes
    â”œâ”€â”€ chat-service.ts       # Cliente OpenAI
    â”œâ”€â”€ openai.ts             # Config OpenAI
    â””â”€â”€ grok.ts               # Config Grok
```

## ğŸ”§ Funcionalidades TÃ©cnicas

### Motor de AnÃ¡lise (`rouletteAnalyzer.ts`)

**FunÃ§Ãµes principais:**
- `parseRouletteNumber()`: Converte nÃºmero em cor, dÃºzia e coluna
- `detectColorSequences()`: Detecta sequÃªncias de cores
- `detectDozenSequences()`: Detecta sequÃªncias em dÃºzias (1+2, 1+3, 2+3)
- `detectColumnSequences()`: Detecta sequÃªncias em colunas (1+2, 1+3, 2+3)
- `generateOpportunities()`: Converte padrÃµes em oportunidades de aposta
- `analyzeRouletteResults()`: AnÃ¡lise completa dos nÃºmeros

### Store Zustand

**Estado persistido:**
- `analysisHistory`: Ãšltimas 50 anÃ¡lises
- `userStats`: EstatÃ­sticas do usuÃ¡rio
- `hasCompletedOnboarding`: Flag de onboarding

**Estado de sessÃ£o:**
- `currentAnalysis`: AnÃ¡lise atual
- `isAnalyzing`: Flag de loading

### Fluxo de AnÃ¡lise

1. **Upload**: UsuÃ¡rio escolhe foto do painel da galeria (`ImagePickerScreen`)
2. **ConversÃ£o**: Imagem Ã© convertida para base64
3. **IA Vision**: GPT-4o detecta os nÃºmeros na imagem
4. **Parse**: NÃºmeros sÃ£o convertidos em objetos RouletteResult
5. **AnÃ¡lise**: Motor detecta todos os padrÃµes de sequÃªncia
6. **Scoring**: PadrÃµes sÃ£o classificados (ruim/bom/alavancar)
7. **ApresentaÃ§Ã£o**: Resultados sÃ£o mostrados com UI gamificada

## ğŸ¨ Design

- **Tema**: Dark mode com gradientes (slate-950 â†’ slate-800)
- **Cores principais**:
  - **Roxo/Purple**: CTA principal e elementos de destaque
  - **Amarelo**: PadrÃµes bons
  - **Vermelho**: PadrÃµes ruins/fracos
  - **Verde**: BotÃµes de compra e sucesso
- **Tipografia**: System font com pesos bold e semibold
- **EspaÃ§amento**: Generoso (Apple HIG)
- **Bordas**: Arredondadas (rounded-2xl, rounded-3xl)

## ğŸ“ Como Usar

### ğŸ” Primeiro Acesso
1. **Insira seu cÃ³digo de acesso**: Use um dos cÃ³digos CLIENTE001-100
2. **AtivaÃ§Ã£o automÃ¡tica**: O cÃ³digo serÃ¡ vinculado ao seu dispositivo
3. **Acesso liberado**: VocÃª tem 30 dias de acesso a partir do primeiro uso

### ğŸ“± NavegaÃ§Ã£o Principal (3 Abas)

#### ğŸ“¸ Aba AnÃ¡lise
1. **Veja suas estatÃ­sticas**: Acompanhe seu histÃ³rico de anÃ¡lises
2. **Envie foto da mesa**: Tire uma foto ou escolha da galeria
3. **AnÃ¡lise IA**: Aguarde 5-10 segundos para processar
4. **Veja resultados**: Oportunidades classificadas por confianÃ§a

#### ğŸ’° Aba Banca
1. **Configure banca inicial**: Informe o valor da sua banca
2. **Adicione resultados diÃ¡rios**: Registre lucros (+) ou perdas (-)
   - **Lives**: 11h, 15h ou 19h (se jogou nas lives)
   - **Sozinho**: Se jogou fora das lives por conta prÃ³pria
3. **Visualize evoluÃ§Ã£o**: GrÃ¡fico dos Ãºltimos 7 dias
4. **Acompanhe histÃ³rico**: Veja os Ãºltimos 30 dias de resultados

#### ğŸ§® Aba Calculadora
1. **Defina meta diÃ¡ria**: Quanto quer lucrar por dia (ex: R$100)
2. **Informe sua banca**: Valor disponÃ­vel para operar
3. **Calcule gestÃ£o**: Veja valores de 1Âª e 2Âª aposta (Martingale)
4. **Planeje operaÃ§Ãµes**: Quantas operaÃ§Ãµes pode fazer com sua banca

### Dicas para Melhores Resultados:
- Tire fotos claras do painel com pelo menos 8-10 nÃºmeros visÃ­veis
- Certifique-se de que os nÃºmeros estÃ£o legÃ­veis
- O app lÃª da ESQUERDA para DIREITA (ou de CIMA para BAIXO em painÃ©is verticais)
- O nÃºmero mais Ã  direita/embaixo Ã© o MAIS RECENTE
- Use a calculadora para planejar suas apostas ANTES de entrar
- Registre TODOS os resultados na aba Banca para ter estatÃ­sticas precisas

## ğŸ” VariÃ¡veis de Ambiente

O app requer:
- `EXPO_PUBLIC_VIBECODE_OPENAI_API_KEY`: Chave da OpenAI para anÃ¡lise

## ğŸš€ Performance

- AnÃ¡lise completa: ~5-10 segundos
- Cache de imagens: FileSystem nativo
- PersistÃªncia: AsyncStorage otimizado
- HistÃ³rico limitado: Ãšltimas 50 anÃ¡lises

## ğŸ¯ Melhorias Recentes

### âœ… SISTEMA COMPLETO INTEGRADO (v5.0 FINAL)

**ğŸ® GamificaÃ§Ã£o 100% Funcional:**
- âœ… NÃ­veis e XP ganhos automaticamente em cada anÃ¡lise
- âœ… Conquistas desbloqueadas automaticamente
- âœ… Sistema de streak atualizado diariamente
- âœ… BotÃ£o "Ver Mais" na tela principal para acessar stats

**ğŸ“Š EstatÃ­sticas em Tempo Real:**
- âœ… Taxa de acerto calculada automaticamente
- âœ… Melhor horÃ¡rio identificado com base em lucros
- âœ… Performance semanal atualizada
- âœ… HistÃ³rico de anÃ¡lises com fotos salvas

**ğŸ”” Alertas Ativos:**
- âœ… NotificaÃ§Ãµes de live (11h, 15h, 19h) agendadas automaticamente
- âœ… Alerta de banca quando cair 20%
- âœ… Stop loss checado a cada resultado adicionado
- âœ… PermissÃµes pedidas ao iniciar o app

**ğŸ¯ IntegraÃ§Ãµes Completas:**
- âœ… AnÃ¡lises adicionam XP automaticamente (10 XP por anÃ¡lise)
- âœ… Resultados na banca checam alertas e stop loss
- âœ… Sistema inicia e configura notificaÃ§Ãµes ao abrir app
- âœ… Tudo persistido e sincronizado entre sessÃµes

### ğŸ® Sistema de GamificaÃ§Ã£o e Stats AvanÃ§adas (v5.0)
- **NÃ­veis e XP**: Sistema de progressÃ£o com nÃ­veis e experiÃªncia
- **Conquistas**: 7 conquistas desbloqueÃ¡veis (Primeira AnÃ¡lise, 10 anÃ¡lises, 50 anÃ¡lises, 100 anÃ¡lises, 7 dias seguidos, Semana lucrativa, 70% win rate)
- **Taxa de Acerto**: Acompanhe seu win rate em tempo real
- **Melhor HorÃ¡rio**: Descubra qual live vocÃª mais lucra (11h, 15h, 19h ou Sozinho)
- **Performance Semanal**: Veja dias lucrativos e lucro dos Ãºltimos 7 dias
- **SequÃªncia de Uso**: Contador de dias consecutivos usando o app
- **Alertas de Banca**: NotificaÃ§Ã£o quando banca cair X%
- **Stop Loss**: Configure limite de perda diÃ¡ria
- **Lembretes de Live**: NotificaÃ§Ãµes para registrar resultados
- **Tela de EstatÃ­sticas**: Nova tela completa com todos os dados
- **Tela de Conquistas**: Visualize e desbloqueie achievements

### ğŸ’° Melhorias na Banca (v4.3)
- **OpÃ§Ã£o "Sozinho"**: Agora vocÃª pode registrar lucros/perdas quando joga sozinho fora das lives (11h, 15h, 19h)
- **Cores diferenciadas**: Cada opÃ§Ã£o tem sua cor (Azul=11h, Roxo=15h, Amarelo=19h, Cinza=Sozinho)

### ğŸ”§ Melhorias de UX (v4.2)
- **BotÃ£o de Sair**: Adicionado botÃ£o vermelho "Sair" no header da tela principal para deslogar e voltar para tela de cÃ³digo
- **Nomes de estratÃ©gias atualizados**: "ImplacÃ¡vel" â†’ "Mago Supremo" e "VisionÃ¡rio" â†’ "Feiticeiro da Roleta"
- **NavegaÃ§Ã£o inteligente**: Ao clicar em "ComeÃ§ar a Magia" no onboarding, usuÃ¡rios jÃ¡ ativados vÃ£o direto para o app (nÃ£o precisam inserir cÃ³digo novamente)
- **BotÃ£o de compra**: Adicionado botÃ£o verde "Comprar Acesso" na tela de ativaÃ§Ã£o que leva direto ao link de pagamento
- **Email atualizado**: Email de contato atualizado para hallefpatyel1@hotmail.com

### âœ¨ NavegaÃ§Ã£o em Abas (v3.0)
- **3 Abas principais**: AnÃ¡lise, Banca e Calculadora
- **PersistÃªncia de login**: NÃ£o precisa mais inserir cÃ³digo toda vez
- **Bottom Tab Navigator**: NavegaÃ§Ã£o intuitiva e rÃ¡pida entre funcionalidades

### ğŸ’° Gerenciamento de Banca (v3.0)
- **ConfiguraÃ§Ã£o inicial**: Define banca de entrada
- **Registro diÃ¡rio**: Adiciona lucros e perdas do dia
- **GrÃ¡fico visual**: Barras dos Ãºltimos 7 dias
- **HistÃ³rico completo**: 30 dias de resultados
- **EstatÃ­sticas**: Lucro total, variaÃ§Ã£o % e banca atual

### ğŸ§® Calculadora de Lucro (v3.0)
- **Meta diÃ¡ria**: Calcula valores necessÃ¡rios para atingir meta
- **ProgressÃ£o Martingale**: 1Âª e 2Âª aposta calculadas automaticamente
- **GestÃ£o de risco**: Mostra % da banca e operaÃ§Ãµes possÃ­veis
- **Dicas integradas**: RecomendaÃ§Ãµes de gestÃ£o de banca

### âœ¨ Design Gamificado (v2.0)
- **OnboardingScreen**: Header maior com gradiente, copy persuasivo, cards gamificados
- **HomeScreen**: EstatÃ­sticas com Ã­cones, botÃ£o principal com borda gradiente, steps numerados
- **ResultsScreen**: Cards de oportunidade coloridos por confianÃ§a, Ã­cones grandes, badges visuais
- **Copy**: Linguagem mais acessÃ­vel e motivadora em todas as telas

### ğŸ› CorreÃ§Ãµes de Bugs CrÃ­ticos
- **Ordem de leitura**: NÃºmeros agora sÃ£o lidos corretamente (esquerdaâ†’direita)
- **AnÃ¡lise de padrÃµes**: Verifica apenas os Ãºltimos 4 resultados para entradas ativas
- **DetecÃ§Ã£o completa**: Mostra TODOS os padrÃµes encontrados (ativos e inativos)
- **RemoÃ§Ã£o de cores**: App agora analisa apenas dÃºzias e colunas (sem cores)
- **Device locking**: 1 cÃ³digo por dispositivo para evitar compartilhamento

## ğŸ¯ Melhorias Futuras

- [ ] Adicionar animaÃ§Ãµes com Reanimated
- [ ] Exportar relatÃ³rios de banca (PDF/CSV)
- [ ] NotificaÃ§Ãµes de metas atingidas
- [ ] GrÃ¡ficos de tendÃªncias avanÃ§ados
- [ ] Modo offline com anÃ¡lise local
- [ ] Compartilhamento de resultados
- [ ] Alertas de padrÃµes em tempo real
- [ ] Suporte a diferentes tipos de roleta (europeia, americana)
- [ ] Tutorial interativo in-app

## ğŸ“± Compatibilidade

- **iOS**: 15.0+
- **Android**: API 21+ (Android 5.0+)
- **Expo**: SDK 53
- **React Native**: 0.76.7

---

âœ¨ Desenvolvido com magia usando Vibecode AI App Builder
